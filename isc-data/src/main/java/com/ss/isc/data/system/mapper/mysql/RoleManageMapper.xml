<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://www.mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ss.isc.data.system.mapper.RoleManageMapper">
	<!--查询用户拥有角色-->
	<select id="list" parameterType="com.ss.isc.data.system.common.model.Role" resultType="com.ss.isc.data.system.common.model.Role">
		SELECT r.ROLE_CNAME AS roleCName,rr.ROLE_ID AS roleId
		FROM cw_ge_role r
		LEFT JOIN cw_ge_user_role_ref rr ON rr.ROLE_ID = r.ROLE_ID
		LEFT JOIN cw_ge_user u ON u.USER_ID = rr.USER_ID
		<where> 
			<if test="userId != null and userId != ''">
				u.`USER_ID` = #{userId}
			</if>
		</where>
	</select>

</mapper>