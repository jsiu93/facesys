<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://www.mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ss.facesys.data.system.mapper.UserManageMapper">
	<!--查询用户列表-->
	<select id="pages" parameterType="com.ss.facesys.data.system.common.model.User" resultType="com.ss.facesys.data.system.common.model.User">
		SELECT
			u.USER_ID AS userId,
			u.LOGIN_NAME AS loginName,
			u.`NAME` AS NAME,
			u.PHONE_NUMBER AS phoneNumber,
			u.WORK_CODE AS workCode,
			u.CREATED_USERID AS createdUserid,
			u.CREATED_TIME AS createdTime,
			o.ORG_CNAME AS orgName,
			u.SEX AS sex,
			u.BRITHDAY AS birthday,
			u.EMAIL AS email,
			u.ORG_ID AS orgId,
			u2.`LOGIN_NAME` AS createdName,
			u.BRITHDAY AS birthday
		FROM
			cw_ge_user u
		LEFT JOIN cw_ge_organization o ON u.ORG_ID = o.ORG_ID
		LEFT JOIN cw_ge_user u2 ON u.CREATED_USERID = u2.`USER_ID`
		<where>
				u.`STATUS` = 1
			<if test="orgId != null and orgId != ''">
				AND u.ORG_ID = #{orgId}
			</if>
			<if test="loginName != null and loginName != ''">
				AND u.LOGIN_NAME LIKE CONCAT('%',#{loginName},'%')
			</if>
			<if test="name != null and name != ''">
				AND u.`NAME` LIKE CONCAT('%',#{name},'%')
			</if>
			<if test="phoneNumber != null and phoneNumber != ''">
				AND u.PHONE_NUMBER LIKE CONCAT('%',#{phoneNumber},'%')
			</if>
			<if test="condition !=null and condition !=''">
				AND u.`NAME` LIKE CONCAT('%',#{condition},'%')
				OR u.LOGIN_NAME LIKE CONCAT('%',#{condition},'%')
				OR u.PHONE_NUMBER LIKE CONCAT('%',#{condition},'%')
			</if>
		</where>
	</select>
	<!--查询用户详情-->
	<select id="detail" parameterType="com.ss.facesys.data.system.common.model.User" resultType="com.ss.facesys.data.system.common.model.User">
		SELECT
		u.USER_ID AS userId,
		u.LOGIN_NAME AS loginName,
		u.PASSWORD AS password,
		u.`NAME` AS NAME,
		u.PHONE_NUMBER AS phoneNumber,
		u.WORK_CODE AS workCode,
		u.CREATED_USERID AS createdUserid,
		u.CREATED_TIME AS createdTime,
		o.ORG_CNAME AS orgName,
		u.SEX AS sex,
		u.BRITHDAY AS birthday,
		u.EMAIL AS email,
		u.ORG_ID AS orgId,
		u2.`LOGIN_NAME` AS createdName,
		u.BRITHDAY AS birthday
		FROM
		cw_ge_user u
		LEFT JOIN cw_ge_organization o ON u.ORG_ID = o.ORG_ID
		LEFT JOIN cw_ge_user u2 ON u.CREATED_USERID = u2.`USER_ID`
		<where>
			u.`STATUS` = 1
			<if test="userId != null and userId != ''">
				AND u.USER_ID = #{userId}
			</if>
		</where>
	</select>
</mapper>